{"version":3,"sources":["components/Sign.js","components/SignList.js","components/popup/AddSign.js","components/popup/AddStamp.js","App.js","serviceWorker.js","index.js"],"names":["Sign","handleDelete","e","window","confirm","sign","_this","props","delSign","signId","this","src","encImg","react_default","a","createElement","alt","style","width","border","margin","id","onClick","Component","SignList","_this$props","signs","list","map","components_Sign","key","defaultProps","AddSign","ctx","isDraw","currP","color","handleMouseDown","button","preventDefault","beginPath","handleMouseMove","event","nativeEvent","X","offsetX","Y","offsetY","draw_line","p","lineWidth","lineCap","lineTo","moveTo","strokeStyle","stroke","handleMouseUp","handleMouseLeave","handleTouchStart","handleTouchMove","originalEvent","touches","pageX","canvas","offsetLeft","pageY","offsetTop","handleTouchEnd","handleClearCanvas","clearRect","height","saveImage","localStorage","setItem","toDataURL","form","FormData","append","axios","post","then","response","alert","closeModal","catch","error","getContext","_this2","align","ref","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","onTouchStart","onTouchMove","onTouchEnd","AddStamp","filterImg","pixels","getImageData","filteredData","evicRed","putImageData","handleChange","file","target","files","fileReader","FileReader","onload","image","Image","result","drawImageData","readAsDataURL","drawCanvas","offsetWidth","offsetHeight","drawImage","console","log","d","data","i","length","type","accept","onChange","customStyles","content","top","left","right","bottom","marginRight","transform","Modal","setAppElement","App","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","getImages","setState","modalIsOpen","modalComponent","get","state","openSignModal","bind","assertThisInitialized","openStampModal","afterOpenModal","components_SignList","lib_default","isOpen","onAfterOpen","onRequestClose","contentLabel","popup_AddSign","popup_AddStamp","Boolean","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"gQAuCeA,6MAlCXC,aAAe,SAACC,GACZ,GAAIC,OAAOC,QAAQ,cAAnB,CADkB,IAKVC,EAASC,EAAKC,MAAdF,KACRC,EAAKC,MAAMC,QAAQH,EAAKI,kFAIxB,IAKQJ,EAASK,KAAKH,MAAdF,KACFM,EAAM,yBAA2BN,EAAKO,OAI5C,OACIC,EAAAC,EAAAC,cAAA,YACIF,EAAAC,EAAAC,cAAA,OACIC,IAAI,OACJC,MAdE,CACVC,MAAO,QACPC,OAAQ,QACRC,OAAQ,QAYAT,IAAKA,EACLU,GAAIhB,EAAKI,SAEbI,EAAAC,EAAAC,cAAA,UAAQO,QAASZ,KAAKT,cAAtB,aA9BGsB,aCCbC,mLAOO,IAAAC,EACsBf,KAAKH,MAAxBmB,EADHD,EACGC,MAAOlB,EADViB,EACUjB,QACTmB,EAAOD,EAAME,IACf,SAAAvB,GAAI,OACAQ,EAAAC,EAAAC,cAACc,EAAD,CACIxB,KAAMA,EACNyB,IAAKzB,EAAKI,OACVD,QAASA,MAIrB,OACIK,EAAAC,EAAAC,cAAA,WACKY,UApBMJ,aAAjBC,EAEKO,aAAe,CAClBL,MAAO,IAuBAF,QCmGAQ,6MA5HXC,IAAM,OACNC,QAAS,IACTC,MAAQ,OACRjB,MAAQ,MACRkB,MAAQ,YAERC,gBAAkB,SAACnC,GACA,IAAXA,EAAEoC,SACFpC,EAAEqC,iBACFjC,EAAK2B,IAAIO,YACTlC,EAAK4B,QAAS,MAStBO,gBAAkB,SAACvC,GACf,IAAIwC,EAAQxC,EAAEyC,YACdzC,EAAEqC,iBACFjC,EAAK6B,MAAQ,CAAES,EAAEF,EAAMG,QAASC,EAAEJ,EAAMK,SACrCzC,EAAK4B,QAAQ5B,EAAK0C,UAAU1C,EAAK6B,UAIxCa,UAAY,SAACC,GACT3C,EAAK2B,IAAIiB,UAAY5C,EAAKY,MAC1BZ,EAAK2B,IAAIkB,QAAU,QACnB7C,EAAK2B,IAAImB,OAAOH,EAAEL,EAAGK,EAAEH,GACvBxC,EAAK2B,IAAIoB,OAAOJ,EAAEL,EAAGK,EAAEH,GACvBxC,EAAK2B,IAAIqB,YAAchD,EAAK8B,MAC5B9B,EAAK2B,IAAIsB,YAGbC,cAAgB,SAACtD,GACbA,EAAEqC,iBACFjC,EAAK4B,QAAS,KAGlBuB,iBAAmB,SAACvD,GAChBI,EAAK4B,QAAS,KAGlBwB,iBAAmB,SAACxD,GAChBA,EAAEqC,iBACRjC,EAAK2B,IAAIO,eAGPmB,gBAAkB,SAACzD,GACf,IAAMwC,EAAQxC,EAAE0D,cAChB1D,EAAEqC,iBACFjC,EAAK6B,MAAQ,CAAES,EAAEF,EAAMmB,QAAQ,GAAGC,MAAQxD,EAAKyD,OAAOC,WACvClB,EAAEJ,EAAMmB,QAAQ,GAAGI,MAAQ3D,EAAKyD,OAAOG,WACtD5D,EAAK0C,UAAU1C,EAAK6B,UAGxBgC,eAAiB,SAACjE,GACdA,EAAEqC,oBAGN6B,kBAAoB,SAAClE,GACjBI,EAAK2B,IAAIoC,UAAU,EAAG,EAAG/D,EAAKyD,OAAO7C,MAAOZ,EAAKyD,OAAOO,QACxDhE,EAAK2B,IAAIO,eAGb+B,UAAY,SAACrE,GAET,IAAM6D,EAASzD,EAAKyD,OACpBS,aAAaC,QAAQ,YAAaV,EAAOW,UAAU,cAEnD,IAAMC,EAAO,IAAIC,SACjBD,EAAKE,OAAO,OAAQd,EAAOW,UAAU,cAErCI,IAAMC,KAAK,mCAAoCJ,GAC9CK,KAAK,SAAAC,GACFC,MAAM,8CACN5E,EAAK8D,oBACL9D,EAAKC,MAAM4E,eAEdC,MAAM,SAAAC,GACHH,MAAO,mBAAqBG,yFAnEhC3E,KAAKuB,IAAMvB,KAAKqD,OAAOuB,WAAW,uCAyE7B,IAAAC,EAAA7E,KAIL,OACIG,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,OAAKyE,MAAM,UACP3E,EAAAC,EAAAC,cAAA,UACI0E,IAAK,SAAAA,GAAG,OAAIF,EAAKxB,OAAS0B,GAC1BvE,MAAM,MACNoD,OAAO,MACPrD,MAVK,CACjBE,OAAQ,qBAUIuE,YAAahF,KAAK2B,gBAClBsD,YAAajF,KAAK+B,gBAClBmD,UAAWlF,KAAK8C,cAChBqC,aAAcnF,KAAK+C,iBACnBqC,aAAcpF,KAAKgD,iBACnBqC,YAAarF,KAAKiD,gBAClBqC,WAAYtF,KAAKyD,gBAXrB,yBAcJtD,EAAAC,EAAAC,cAAA,OAAKyE,MAAM,UACP3E,EAAAC,EAAAC,cAAA,UACIM,GAAG,UACHC,QAASZ,KAAK0D,mBAFlB,SAIAvD,EAAAC,EAAAC,cAAA,UACIM,GAAG,UACHC,QAASZ,KAAK6D,WAFlB,yBApHEhD,aCiIP0E,6MA/HXhE,IAAM,OACNC,QAAS,IACTC,MAAQ,OACRjB,MAAQ,MACRkB,MAAQ,YASRgC,kBAAoB,SAAClE,GACjBI,EAAK2B,IAAIoC,UAAU,EAAG,EAAG/D,EAAKyD,OAAO7C,MAAOZ,EAAKyD,OAAOO,QACxDhE,EAAK2B,IAAIO,eAGb+B,UAAY,SAACrE,GACTI,EAAK4F,YAEL,IAAMnC,EAASzD,EAAKyD,OACpBS,aAAaC,QAAQ,YAAaV,EAAOW,UAAU,cAEnD,IAAMC,EAAO,IAAIC,SACjBD,EAAKE,OAAO,OAAQd,EAAOW,UAAU,cAErCI,IAAMC,KAAK,mCAAoCJ,GAC9CK,KAAK,SAAAC,GACFC,MAAM,8CACN5E,EAAK8D,oBACL9D,EAAKC,MAAM4E,eAEdC,MAAM,SAAAC,GACHH,MAAO,mBAAqBG,QAIpCa,UAAY,WAER,IAAIC,EAAS7F,EAAK2B,IAAImE,aAAa,EAAG,EAAG9F,EAAKyD,OAAO7C,MAAOZ,EAAKyD,OAAOO,QAIpE+B,EAAe/F,EAAKgG,QAAQH,GAGhC7F,EAAK2B,IAAIsE,aAAaF,EAAc,EAAG,MAoB3CG,aAAe,SAACtG,GACZ,IAAIuG,EAAOvG,EAAEwG,OAAOC,MAAM,GACtBC,EAAa,IAAIC,WAErBD,EAAWE,OAAS,SAAC5G,GACjB,IAAI6G,EAAQ,IAAIC,MAChBD,EAAMpG,IAAMT,EAAEwG,OAAOO,OACrBF,EAAMD,OAAS,WACXxG,EAAK4G,cAAcH,KAI3BH,EAAWO,cAAcV,MAG7BS,cAAgB,SAACH,GACb,IAAMK,EAAa9G,EAAKyD,OACxBgD,EAAMzC,QAAU8C,EAAWC,YAAcN,EAAM7F,MAC/C6F,EAAM7F,MAAQkG,EAAWC,YAEtBN,EAAMzC,OAAS8C,EAAWE,eACzBP,EAAM7F,OAASkG,EAAWE,aAAeP,EAAMzC,OAC/CyC,EAAMzC,OAAS8C,EAAWE,cAG9BhH,EAAK2B,IAAIsF,UAAUR,EAAO,EAAG,EAAGA,EAAM7F,MAAO6F,EAAMzC,QACnDkD,QAAQC,IAAInH,EAAK2B,IAAImE,aAAa,EAAE,EAAGgB,EAAWlG,MAAOkG,EAAW9C,6FArFpE5D,KAAKuB,IAAMvB,KAAKqD,OAAOuB,WAAW,sCA0C9Ba,GAGJ,IAFA,IAAIuB,EAAIvB,EAAOwB,KAENC,EAAI,EAAGA,EAAIzB,EAAOwB,KAAKE,OAAQD,GAAK,EAErCF,EAAEE,GAAK,KAAOF,EAAEE,EAAI,GAAK,KAAOF,EAAEE,EAAI,GAAK,IAC3CF,EAAEE,EAAI,GAAK,EAGLF,EAAEE,GAAK,KAAOF,EAAEE,EAAI,GAAK,KAAOF,EAAEE,EAAI,GAAK,MAC7CF,EAAEE,EAAI,GAAK,GAIvB,OAAOzB,mCAiCF,IAAAZ,EAAA7E,KAIL,OACIG,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,OAAKyE,MAAM,UACP3E,EAAAC,EAAAC,cAAA,UACI0E,IAAK,SAAAA,GAAG,OAAIF,EAAKxB,OAAS0B,GAC1BvE,MAAM,MACNoD,OAAO,MACPrD,MAVK,CACjBE,OAAQ,sBAKA,yBAOJN,EAAAC,EAAAC,cAAA,OAAKyE,MAAM,UACP3E,EAAAC,EAAAC,cAAA,SACI+G,KAAK,OACLC,OAAO,UACPC,SAAUtH,KAAK8F,eAEnB3F,EAAAC,EAAAC,cAAA,UACIM,GAAG,UACHC,QAASZ,KAAK6D,WAFlB,yBAvHGhD,8BCIjB0G,EAAe,CACnBC,QAAU,CACRC,IAAwB,MACxBC,KAAwB,MACxBC,MAAwB,OACxBC,OAAwB,OACxBC,YAAwB,OACxBC,UAAwB,0BAI5BC,IAAMC,cAAc,aAiHLC,cA7Gb,SAAAA,IAAc,IAAArI,EAAA,OAAAsI,OAAAC,EAAA,EAAAD,CAAAlI,KAAAiI,IACZrI,EAAAsI,OAAAE,EAAA,EAAAF,CAAAlI,KAAAkI,OAAAG,EAAA,EAAAH,CAAAD,GAAAK,KAAAtI,QAgCFyE,WAAa,WACX7E,EAAK2I,YACL3I,EAAK4I,SAAS,CACZC,aAAa,EACbC,eAAgB,MArCN9I,EAgDd2I,UAAY,WACVnE,IAAMuE,IAAI,gCACTrE,KAAK,SAAAC,GAAY,IACN0C,EAAS1C,EAAT0C,KACRrH,EAAK4I,SAAS,CACZxH,MAAOiG,MAGZvC,MAAM,SAAAC,GACHmC,QAAQC,IAAIpC,MAzDJ/E,EA6DdE,QAAU,SAACC,GACT,IAAMkE,EAAO,IAAIC,SACjBD,EAAKE,OAAO,QAASpE,GAErBqE,IAAMC,KAAK,gCAAiCJ,GAC3CK,KAAK,SAAAC,GACJC,MAAM,yBACN5E,EAAK2I,cAEN7D,MAAM,SAAAC,GACHH,MAAO,mBAAqBG,MApEhC/E,EAAKgJ,MAAQ,CACXH,aAAa,EACbC,eAAgB,GAChB1H,MAAO,IAGTpB,EAAKiJ,cAAgBjJ,EAAKiJ,cAAcC,KAAnBZ,OAAAa,EAAA,EAAAb,QAAAa,EAAA,EAAAb,CAAAtI,KACrBA,EAAKoJ,eAAiBpJ,EAAKoJ,eAAeF,KAApBZ,OAAAa,EAAA,EAAAb,QAAAa,EAAA,EAAAb,CAAAtI,KACtBA,EAAKqJ,eAAiBrJ,EAAKqJ,eAAeH,KAApBZ,OAAAa,EAAA,EAAAb,QAAAa,EAAA,EAAAb,CAAAtI,KACtBA,EAAK6E,WAAa7E,EAAK6E,WAAWqE,KAAhBZ,OAAAa,EAAA,EAAAb,QAAAa,EAAA,EAAAb,CAAAtI,KAZNA,+EAgBZI,KAAKwI,SAAS,CACZC,aAAa,EACbC,eAAgB,kDAKlB1I,KAAKwI,SAAS,CACZC,aAAa,EACbC,eAAgB,gGAkBlB5B,QAAQC,IAAI,cACZ/G,KAAKuI,6CAmCL,OACEpI,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,yCACAF,EAAAC,EAAAC,cAAA,UAAQO,QAASZ,KAAK6I,eAAtB,4BACA1I,EAAAC,EAAAC,cAAA,UAAQO,QAASZ,KAAKgJ,gBAAtB,4BACA7I,EAAAC,EAAAC,cAAC6I,EAAD,CACElI,MAAOhB,KAAK4I,MAAM5H,MAClBlB,QAASE,KAAKF,UAGhBK,EAAAC,EAAAC,cAAC8I,EAAA/I,EAAD,CACEgJ,OAAQpJ,KAAK4I,MAAMH,YACnBY,YAAarJ,KAAKiJ,eAClBK,eAAgBtJ,KAAKyE,WACrBlE,MAAOgH,EACPgC,aAAa,iBAGmB,SAA9BvJ,KAAK4I,MAAMF,eACPvI,EAAAC,EAAAC,cAACmJ,EAAD,CAAS/E,WAAYzE,KAAKyE,aAC1BtE,EAAAC,EAAAC,cAACoJ,EAAD,CAAUhF,WAAYzE,KAAKyE,sBArGzB5D,aCRE6I,QACW,cAA7BjK,OAAOkK,SAASC,UAEe,UAA7BnK,OAAOkK,SAASC,UAEhBnK,OAAOkK,SAASC,SAASC,MACvB,2DCZNC,IAASC,OAAO5J,EAAAC,EAAAC,cAAC2J,EAAD,MAASC,SAASC,eAAe,SD2H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAM/F,KAAK,SAAAgG,GACjCA,EAAaC","file":"static/js/main.591dde31.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\n\r\nclass Sign extends Component {\r\n\r\n    handleDelete = (e) => {\r\n        if(!window.confirm('delete it?')) {\r\n            return;\r\n        }\t\r\n\r\n        const { sign } = this.props;\r\n        this.props.delSign(sign.signId);\r\n    }\r\n\r\n    render() {\r\n        const style = {\r\n            width: '200px',\r\n            border: 'solid',\r\n            margin: '10px',\r\n        }\r\n        const { sign } = this.props;\r\n        const src = 'data:image/png;base64,' + sign.encImg;\r\n\r\n        \r\n\r\n        return (\r\n            <span>\r\n                <img\r\n                    alt=\"sign\"\r\n                    style={style}\r\n                    src={src}\r\n                    id={sign.signId}\r\n                />\r\n                <button onClick={this.handleDelete}>X</button>\r\n            </span>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Sign;","import React, { Component } from 'react';\r\nimport Sign from './Sign';\r\n\r\n\r\nclass SignList extends Component {\r\n\r\n    static defaultProps = {\r\n        signs: []\r\n    }\r\n    \r\n\r\n    render() {\r\n        const { signs, delSign } = this.props;\r\n        const list = signs.map( \r\n            sign => \r\n                <Sign \r\n                    sign={sign} \r\n                    key={sign.signId} \r\n                    delSign={delSign}\r\n                /> \r\n        )\r\n\r\n        return (\r\n            <div>\r\n                {list}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default SignList;","import React, { Component } from 'react';\r\nimport axios from 'axios';\r\n\r\nclass AddSign extends Component {\r\n\r\n    ctx = null;\r\n    isDraw = false;\r\n    currP = null;\r\n    width = '3';\r\n    color = '#000000';\r\n\r\n    handleMouseDown = (e) => {\r\n        if (e.button===0) {\r\n            e.preventDefault();\r\n            this.ctx.beginPath();\r\n            this.isDraw = true;\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.ctx = this.canvas.getContext('2d');\r\n    }\r\n    \r\n\r\n    handleMouseMove = (e) => {\r\n        var event = e.nativeEvent;\r\n        e.preventDefault();\r\n        this.currP = { X:event.offsetX, Y:event.offsetY };\r\n        if(this.isDraw) this.draw_line(this.currP);\r\n    }\r\n    \r\n    // 선 그리기\r\n    draw_line = (p) => {\r\n        this.ctx.lineWidth = this.width;\r\n        this.ctx.lineCap = 'round';\r\n        this.ctx.lineTo(p.X, p.Y);\r\n        this.ctx.moveTo(p.X, p.Y);\r\n        this.ctx.strokeStyle = this.color;\r\n        this.ctx.stroke();\r\n    }\r\n\r\n    handleMouseUp = (e) => {\r\n        e.preventDefault();\r\n        this.isDraw = false;\r\n    }\r\n\r\n    handleMouseLeave = (e) => {\r\n        this.isDraw = false;\r\n    }\r\n\r\n    handleTouchStart = (e) => {\r\n        e.preventDefault();\r\n\t\tthis.ctx.beginPath();\r\n    }\r\n\r\n    handleTouchMove = (e) => {\r\n        const event = e.originalEvent;\r\n        e.preventDefault();\r\n        this.currP = { X:event.touches[0].pageX - this.canvas.offsetLeft\r\n                     , Y:event.touches[0].pageY - this.canvas.offsetTop };\r\n        this.draw_line(this.currP);\r\n    }\r\n\r\n    handleTouchEnd = (e) => {\r\n        e.preventDefault();\r\n    }\r\n\r\n    handleClearCanvas = (e) => {\r\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n        this.ctx.beginPath();\r\n    }\r\n\r\n    saveImage = (e) => { // save to localStorage\r\n\t\t\t\r\n        const canvas = this.canvas;\r\n        localStorage.setItem('imgCanvas', canvas.toDataURL('image/png'));\r\n\r\n        const form = new FormData();\r\n        form.append('data', canvas.toDataURL('image/png'));\r\n\r\n        axios.post('http://localhost:8080/uploadsign', form)\r\n        .then(response => {\r\n            alert('저장되었습니다');\r\n            this.handleClearCanvas();\r\n            this.props.closeModal();\r\n        })\r\n        .catch(error => {\r\n            alert( \"Request failed: \" + error );\r\n        });\r\n    }\r\n\r\n\r\n    \r\n    render() {\r\n        const canvas_style = {\r\n            border: '1px solid #000000',\r\n        }\r\n        return (\r\n            <div>\r\n                <div align=\"center\">\r\n                    <canvas \r\n                        ref={ref => this.canvas = ref}\r\n                        width=\"320\" \r\n                        height=\"320\" \r\n                        style={canvas_style}\r\n                        onMouseDown={this.handleMouseDown}\r\n                        onMouseMove={this.handleMouseMove}\r\n                        onMouseUp={this.handleMouseUp}\r\n                        onMouseLeave={this.handleMouseLeave}\r\n                        onTouchStart={this.handleTouchStart}\r\n                        onTouchMove={this.handleTouchMove}\r\n                        onTouchEnd={this.handleTouchEnd}\r\n                    >Canvas not supported</canvas>\r\n\t            </div>\r\n                <div align=\"center\">\r\n                    <button \r\n                        id=\"btnClea\"\r\n                        onClick={this.handleClearCanvas}\r\n                    >Clear</button>\r\n                    <button \r\n                        id=\"btnSave\"\r\n                        onClick={this.saveImage}\r\n                    >저장</button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AddSign;","import React, { Component } from 'react';\r\nimport axios from 'axios';\r\n\r\nclass AddStamp extends Component {\r\n\r\n    ctx = null;\r\n    isDraw = false;\r\n    currP = null;\r\n    width = '3';\r\n    color = '#000000';\r\n\r\n\r\n    componentDidMount() {\r\n        this.ctx = this.canvas.getContext('2d');\r\n    }\r\n    \r\n\r\n\r\n    handleClearCanvas = (e) => {\r\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n        this.ctx.beginPath();\r\n    }\r\n\r\n    saveImage = (e) => { // save to localStorage\r\n        this.filterImg();    \r\n        \r\n        const canvas = this.canvas;\r\n        localStorage.setItem('imgCanvas', canvas.toDataURL('image/png'));\r\n\r\n        const form = new FormData();\r\n        form.append('data', canvas.toDataURL('image/png'));\r\n\r\n        axios.post('http://localhost:8080/uploadsign', form)\r\n        .then(response => {\r\n            alert('저장되었습니다');\r\n            this.handleClearCanvas();\r\n            this.props.closeModal();\r\n        })\r\n        .catch(error => {\r\n            alert( \"Request failed: \" + error );\r\n        });\r\n    }\r\n\r\n    filterImg = () => {\r\n        // imageData를 가져온다.\r\n        var pixels = this.ctx.getImageData(0, 0, this.canvas.width, this.canvas.height);\r\n    \r\n        // image processing\r\n        // var filteredData = invertFilter(pixels);\r\n        var filteredData = this.evicRed(pixels);\r\n    \r\n        // Canvas에 다시 그린다.\r\n        this.ctx.putImageData(filteredData, 0, 0);\r\n    }\r\n\r\n    evicRed(pixels) {\r\n        var d = pixels.data;\r\n    \r\n        for (var i = 0; i < pixels.data.length; i += 4) {\r\n    \r\n            if (d[i] > 240 && d[i + 1] > 240 && d[i + 2] > 240) {\r\n                d[i + 3] = 0; // Alpha 투명처리\r\n            } else {\r\n    \r\n                if (!(d[i] > 150 && d[i + 1] < 150 && d[i + 2] < 150)) {\r\n                    d[i + 3] = 0; // Alpha 투명처리\r\n                }\r\n            }\r\n        }\r\n        return pixels;\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        var file = e.target.files[0];\r\n        var fileReader = new FileReader();\r\n    \r\n        fileReader.onload = (e) => {\r\n            var image = new Image();\r\n            image.src = e.target.result;\r\n            image.onload = () => {\r\n                this.drawImageData(image);\r\n            }\r\n        };\r\n    \r\n        fileReader.readAsDataURL(file);\r\n    }\r\n\r\n    drawImageData = (image) => {\r\n        const drawCanvas = this.canvas;\r\n        image.height *= drawCanvas.offsetWidth / image.width;\r\n        image.width = drawCanvas.offsetWidth;\r\n        \r\n        if(image.height > drawCanvas.offsetHeight){\r\n            image.width *= drawCanvas.offsetHeight / image.height;\r\n            image.height = drawCanvas.offsetHeight;\r\n        }\r\n\r\n        this.ctx.drawImage(image, 0, 0, image.width, image.height);\r\n        console.log(this.ctx.getImageData(0,0, drawCanvas.width, drawCanvas.height));\r\n    }\r\n\r\n    \r\n    render() {\r\n        const canvas_style = {\r\n            border: '1px solid #000000',\r\n        }\r\n        return (\r\n            <div>\r\n                <div align=\"center\">\r\n                    <canvas \r\n                        ref={ref => this.canvas = ref}\r\n                        width=\"320\" \r\n                        height=\"320\" \r\n                        style={canvas_style}\r\n                    >Canvas not supported</canvas>\r\n\t            </div>\r\n                <div align=\"center\">\r\n                    <input \r\n                        type=\"file\" \r\n                        accept=\"image/*\"\r\n                        onChange={this.handleChange} \r\n                    />\r\n                    <button \r\n                        id=\"btnSave\"\r\n                        onClick={this.saveImage}\r\n                    >저장</button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AddStamp;","import React, { Component } from 'react';\nimport SignList from './components/SignList.js';\nimport axios from 'axios';\nimport AddSign from './components/popup/AddSign.js';\nimport AddStamp from './components/popup/AddStamp.js';\nimport Modal from 'react-modal';\n\nconst customStyles = {\n  content : {\n    top                   : '50%',\n    left                  : '50%',\n    right                 : 'auto',\n    bottom                : 'auto',\n    marginRight           : '-50%',\n    transform             : 'translate(-50%, -50%)'\n  }\n};\n\nModal.setAppElement('#root')\n\nclass App extends Component {\n\n  constructor() {\n    super();\n \n    this.state = {\n      modalIsOpen: false,\n      modalComponent: '',\n      signs: [],\n    };\n \n    this.openSignModal = this.openSignModal.bind(this);\n    this.openStampModal = this.openStampModal.bind(this);\n    this.afterOpenModal = this.afterOpenModal.bind(this);\n    this.closeModal = this.closeModal.bind(this);\n  }\n\n  openSignModal() {\n    this.setState({\n      modalIsOpen: true,\n      modalComponent: 'sign'\n    });\n  }\n\n  openStampModal() {\n    this.setState({\n      modalIsOpen: true,\n      modalComponent: 'stamp'\n    });\n  }\n \n  afterOpenModal() {\n    // references are now sync'd and can be accessed.\n  }\n \n  closeModal = () => {\n    this.getImages();\n    this.setState({\n      modalIsOpen: false,\n      modalComponent: ''\n    });\n    \n  }\n\n  componentDidMount() {\n    console.log('did mount!')\n    this.getImages();\n  }\n\n\n  getImages = () => {\n    axios.get('http://localhost:8080/images')\n    .then(response => {\n        const { data } = response;\n        this.setState({\n          signs: data\n        })\n    })\n    .catch(error => {\n        console.log(error);\n    });\n  }\n\n  delSign = (signId) => {\n    const form = new FormData();\n    form.append('imgId', signId);\n\n    axios.post('http://localhost:8080/delsign', form)\n    .then(response => {\n      alert('successfully deleted!');\n      this.getImages();\n    })\n    .catch(error => {\n        alert( \"Request failed: \" + error );\n    });\n  }\n  \n\n\n  render() {\n    \n    return (\n      <div>\n        <h1>사인 / 도장</h1>\n        <button onClick={this.openSignModal}>사인추가</button>\n        <button onClick={this.openStampModal}>도장추가</button>\n        <SignList \n          signs={this.state.signs}\n          delSign={this.delSign}  \n        />\n\n        <Modal\n          isOpen={this.state.modalIsOpen}\n          onAfterOpen={this.afterOpenModal}\n          onRequestClose={this.closeModal}\n          style={customStyles}\n          contentLabel=\"Example Modal\"\n        >\n          {\n            this.state.modalComponent === 'sign'\n              ? <AddSign closeModal={this.closeModal} />\n              : <AddStamp closeModal={this.closeModal} />\n          }\n          \n        </Modal>\n      </div>\n    );\n  }\n}\n\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}